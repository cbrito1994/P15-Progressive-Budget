(()=>{var e,o=indexedDB.open("BudgetDB",1);function n(){console.log("check indexedDb invoked");var o=e.transaction(["BudgetStore"],"readwrite"),n=o.objectStore("BudgetStore").getAll();n.onsuccess=function(){n.result.length>0&&fetch("/api/transaction/bulk",{method:"POST",body:JSON.stringify(n.result),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(n){0!==n.length&&((o=e.transaction(["BudgetStore"],"readwrite")).objectStore("BudgetStore").clear(),console.log("Clearing store üßπ"))}))}}o.onupgradeneeded=function(o){console.log("Upgrade needed in IndexDB");var n=o.oldVersion,t=o.newVersion||e.version;console.log("indexedDb Updated from version ".concat(n," to ").concat(t)),0===(e=o.target.result).objectStoreNames.length&&e.createObjectStore("BudgetStore",{autoIncrement:!0})},o.onerror=function(e){console.log("Woops! ".concat(e.target.errorCode))},o.onsuccess=function(o){console.log("success"),e=o.target.result,navigator.onLine&&(console.log("Backend online! üóÑÔ∏è"),n())},window.addEventListener("online",n)})();